#!/bin/sh
#
#  prepare-clean
#
#  Author: Pekka Riikonen <priikone@poseidon.pspt.fi>
#
#  Copyright (C) 2000 Pekka Riikonen
#
#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#

#
# Prepares SILC source tree for configuration and compilation. This is
# done only after checkout from CVS. This is only for developers of SILC
# and will never appear in public distribution. When creating distributions
# this is always run first. After the distribution is created all
# temporary files (including these prepare* scripts) are removed.
#

echo "Preparing SILC source tree for configuration and compilation..."
aclocal
autoconf
autoheader
automake

version=`date +%d%m%Y`
file=includes/version_internal.h
echo "/* Automatically generated by ./prepare */" >$file
echo "#define SILC_VERSION_STRING \"$version\"" >>$file
echo "#define SILC_PROTOCOL_VERSION_STRING \"SILC-1.0-$version\"" >>$file

echo "Done, now run ./configure and make."
