Summary: SILC Client
Name: silc-client
Version: SILC_VERSION
Release: SILC_RELEASE
License: GPL
Group: Applications/Communications
URL: http://silcnet.org/
Source0: silc-client-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-buildroot
BuildRequires: silc-toolkit-devel
Requires: silc-toolkit >= 1.1

%description
SILC (Secure Internet Live Conferencing) is a protocol which provides
secure conferencing services on the Internet over insecure channel.
SILC Client is used to connect to SILC server and SILC network.  More
information at http://silcnet.org/.

# Need this because the irssi's configure we run from silc-client
# configure somehow installs some of the files to location where I don't
# know how to reach them.
%define _unpackaged_files_terminate_build 0

%prep
%setup -q

%build
%configure --prefix=%{_prefix} \
           --mandir=%{_mandir} \
           --infodir=%{_infodir} \
           --bindir=%{_bindir} \
           --datadir=%{_datadir} \
	   --with-perl-lib=%{_libdir}/silc/perl5 \
           --enable-ipv6 --with-socks --with-perl=yes
make -j4

%install
rm -rf $RPM_BUILD_ROOT
make DESTDIR=$RPM_BUILD_ROOT install
rm -f $RPM_BUILD_ROOT/%{_libdir}/perl5/5.6.0/i386-linux/perllocal.pod
rm -f $RPM_BUILD_ROOT/%{_datadir}/doc/silc-client

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr (-,root,root,-)
%{_bindir}/*
%{_libdir}/silc/perl5
%{_sysconfdir}/silc.conf
%{_mandir}/man1/*
%{_datadir}/silc
%doc CHANGES COPYING CREDITS README README.PLUGIN TODO doc/FAQ
%doc apps/irssi/docs/*.txt apps/irssi/docs/*.html

%changelog
* Sat Jun  2 2007 - Pekka Riikonen <priikone@silcnet.org>
- Initial version
